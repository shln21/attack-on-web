# AMD、 CMD、UMD、IIFE模块化规范介绍及使用

## 简介

**模块**可以**理解为函数代码块的功能，是封装对象的属性和方法的javascript代码，它可以是某单个文件，变量或者函数**。模块实质上是对业务逻辑分离实现**低耦合高内聚**（以下单功能为例），也便于代码管理而不是所有功能代码堆叠在一起，模块真正的魔力所在是仅导出和导入你需要的绑定，而不是将所有的东西都放到一个文件。引入模块与引入脚本是有区别的,前者更多是按需引入加载，后者而是无论有没有用，全部一次性引入和加载，类似于通过script标签引入jQuery等库都是一次性载入。

**AMD** （ Asynchronous Module Definition），是从 CommonJS 讨论中诞生的。AMD 优先照顾浏览器的模块加载场景，使用了异步加载和回调的方式。代表为requireJS。

**CMD**（Common Module Definition），在CMD中，一个模块就是一个文件。Sea.js遵循CMD规范，与NodeJS般的书写模块代码。

**UMD**（Universal Module Definition ），就是将 AMD 和 CommonJS 合在一起的一种尝试，常见的做法是将CommonJS 语法包裹在兼容 AMD 的代码中。

**IIFE**: Immediately Invoked Function Expression，意为立即调用的函数表达式，也就是说，声明函数的同时立即调用这个函数。



**AMD与CMD的异同点**

共同点：

都是对模块定义的不同规范，都是异步加载模块，并且解决文件之间的依赖重命名冲突等问题。 

不同点：

1、模块定义的方式和模块加载机制是不同的

前者AMD(requirejs)是将所有文件同时加载，一次性引入，推崇依赖前置，也就是在定义模块时要先声明其依赖的模块，加载完模块后会立马执行该模块(运行时加载)；

而CMD(seajs)强调的是一个文件一个模块，可按需引入，推崇依赖就近，加载完某个模块后不会立即执行，而是等遇到了require语句的时候在执行。

2、两者的使用加载机制不同

AMD(requirejs)模块会提前执行，用户体验好；而CMD(seajs)性能好，因为只有在需要时候才执行，在服务器端，nodejs使用的就是cmd规范，也就是需要什么包，就引入什么包，按需加入(编译时加载)。